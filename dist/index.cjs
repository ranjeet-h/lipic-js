"use strict";var R=Object.defineProperty;var U=Object.getOwnPropertyDescriptor;var $=Object.getOwnPropertyNames;var G=Object.prototype.hasOwnProperty;var W=(e,n)=>{for(var o in n)R(e,o,{get:n[o],enumerable:!0})},q=(e,n,o,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of $(n))!G.call(e,r)&&r!==o&&R(e,r,{get:()=>n[r],enumerable:!(t=U(n,r))||t.enumerable});return e};var X=e=>q(R({},"__esModule",{value:!0}),e);var ve={};W(ve,{DOMIntegrator:()=>E,buildTrie:()=>T,createInputInterceptor:()=>K,createInputStack:()=>x,createTransliterationEngine:()=>j,deleteAndInsert:()=>m,deleteAndInsertContentEditable:()=>w,devanagariBase:()=>I,maps:()=>be,marathiPhoneticBase:()=>A,marathiPhoneticExpanded:()=>C,walkLongest:()=>f});module.exports=X(ve);var I={consonants:["\u0915","\u0916","\u0917","\u0918","\u0919","\u091A","\u091B","\u091C","\u091D","\u091E","\u091F","\u0920","\u0921","\u0922","\u0923","\u0924","\u0925","\u0926","\u0927","\u0928","\u092A","\u092B","\u092C","\u092D","\u092E","\u092F","\u0930","\u0932","\u0935","\u0936","\u0937","\u0938","\u0939","\u0933"],vowelsIndependent:["\u0905","\u0906","\u0907","\u0908","\u0909","\u090A","\u090B","\u0960","\u090C","\u0961","\u090F","\u0910","\u0913","\u0914","\u0972","\u0911"],vowelMatras:["\u093E","\u093F","\u0940","\u0941","\u0942","\u0943","\u0944","\u0962","\u0963","\u0947","\u0948","\u094B","\u094C","\u0945","\u0949"],halant:"\u094D",digits:["\u0966","\u0967","\u0968","\u0969","\u096A","\u096B","\u096C","\u096D","\u096E","\u096F"],marks:{anusvara:"\u0902",chandrabindu:"\u0901",visarga:"\u0903"}};var A={a:{type:"vowel",glyph:"\u0905",matra:""},aa:{type:"vowel",glyph:"\u0906",matra:"\u093E"},i:{type:"vowel",glyph:"\u0907",matra:"\u093F"},ii:{type:"vowel",glyph:"\u0908",matra:"\u0940"},u:{type:"vowel",glyph:"\u0909",matra:"\u0941"},uu:{type:"vowel",glyph:"\u090A",matra:"\u0942"},ri:{type:"vowel",glyph:"\u090B",matra:"\u0943"},e:{type:"vowel",glyph:"\u090F",matra:"\u0947"},ai:{type:"vowel",glyph:"\u0910",matra:"\u0948"},o:{type:"vowel",glyph:"\u0913",matra:"\u094B"},au:{type:"vowel",glyph:"\u0914",matra:"\u094C"},ae:{type:"vowel",glyph:"\u0972",matra:"\u0945"},aw:{type:"vowel",glyph:"\u0911",matra:"\u0949"},k:{type:"consonant",glyph:"\u0915"},kh:{type:"consonant",glyph:"\u0916"},g:{type:"consonant",glyph:"\u0917"},gh:{type:"consonant",glyph:"\u0918"},ng:{type:"consonant",glyph:"\u0919"},ch:{type:"consonant",glyph:"\u091A"},chh:{type:"consonant",glyph:"\u091B"},j:{type:"consonant",glyph:"\u091C"},jh:{type:"consonant",glyph:"\u091D"},ny:{type:"consonant",glyph:"\u091E"},T:{type:"consonant",glyph:"\u091F"},Th:{type:"consonant",glyph:"\u0920"},D:{type:"consonant",glyph:"\u0921"},Dh:{type:"consonant",glyph:"\u0922"},N:{type:"consonant",glyph:"\u0923"},t:{type:"consonant",glyph:"\u0924"},th:{type:"consonant",glyph:"\u0925"},d:{type:"consonant",glyph:"\u0926"},dh:{type:"consonant",glyph:"\u0927"},n:{type:"consonant",glyph:"\u0928"},p:{type:"consonant",glyph:"\u092A"},ph:{type:"consonant",glyph:"\u092B"},b:{type:"consonant",glyph:"\u092C"},bh:{type:"consonant",glyph:"\u092D"},m:{type:"consonant",glyph:"\u092E"},y:{type:"consonant",glyph:"\u092F"},r:{type:"consonant",glyph:"\u0930"},l:{type:"consonant",glyph:"\u0932"},v:{type:"consonant",glyph:"\u0935"},L:{type:"consonant",glyph:"\u0933"},sh:{type:"consonant",glyph:"\u0936"},Sh:{type:"consonant",glyph:"\u0937"},s:{type:"consonant",glyph:"\u0938"},h:{type:"consonant",glyph:"\u0939"},M:{type:"mark",glyph:"\u0902"},MM:{type:"mark",glyph:"\u0901"},H:{type:"mark",glyph:"\u0903"}};var C={a:{type:"vowel",glyph:"\u0905",matra:""},A:{type:"vowel",glyph:"\u0906",matra:"\u093E"},\u0101:{type:"vowel",glyph:"\u0906",matra:"\u093E"},aa:{type:"vowel",glyph:"\u0906",matra:"\u093E"},ae:{type:"vowel",glyph:"\u0972",matra:"\u0945"},ai:{type:"vowel",glyph:"\u0910",matra:"\u0948"},au:{type:"vowel",glyph:"\u0914",matra:"\u094C"},aw:{type:"vowel",glyph:"\u0911",matra:"\u0949"},b:{type:"consonant",glyph:"\u092C"},bh:{type:"consonant",glyph:"\u092D"},ch:{type:"consonant",glyph:"\u091A"},chh:{type:"consonant",glyph:"\u091B"},d:{type:"consonant",glyph:"\u0926"},D:{type:"consonant",glyph:"\u0921"},dh:{type:"consonant",glyph:"\u0927"},Dh:{type:"consonant",glyph:"\u0922"},dny:{type:"conjunct",glyph:"\u091C\u094D\u091E"},e:{type:"vowel",glyph:"\u090F",matra:"\u0947"},g:{type:"consonant",glyph:"\u0917"},gh:{type:"consonant",glyph:"\u0918"},gy:{type:"conjunct",glyph:"\u091C\u094D\u091E"},h:{type:"consonant",glyph:"\u0939"},H:{type:"mark",glyph:"\u0903"},i:{type:"vowel",glyph:"\u0907",matra:"\u093F"},I:{type:"vowel",glyph:"\u0908",matra:"\u0940"},\u012B:{type:"vowel",glyph:"\u0908",matra:"\u0940"},ii:{type:"vowel",glyph:"\u0908",matra:"\u0940"},j:{type:"consonant",glyph:"\u091C"},jh:{type:"consonant",glyph:"\u091D"},k:{type:"consonant",glyph:"\u0915"},kh:{type:"consonant",glyph:"\u0916"},l:{type:"consonant",glyph:"\u0932"},L:{type:"consonant",glyph:"\u0933"},m:{type:"consonant",glyph:"\u092E"},M:{type:"mark",glyph:"\u0902"},MM:{type:"mark",glyph:"\u0901"},n:{type:"consonant",glyph:"\u0928"},N:{type:"consonant",glyph:"\u0923"},ng:{type:"consonant",glyph:"\u0919"},ny:{type:"consonant",glyph:"\u091E"},o:{type:"vowel",glyph:"\u0913",matra:"\u094B"},p:{type:"consonant",glyph:"\u092A"},ph:{type:"consonant",glyph:"\u092B"},r:{type:"consonant",glyph:"\u0930"},ri:{type:"vowel",glyph:"\u090B",matra:"\u0943"},s:{type:"consonant",glyph:"\u0938"},sh:{type:"consonant",glyph:"\u0936"},Sh:{type:"consonant",glyph:"\u0937"},t:{type:"consonant",glyph:"\u0924"},T:{type:"consonant",glyph:"\u091F"},th:{type:"consonant",glyph:"\u0925"},Th:{type:"consonant",glyph:"\u0920"},u:{type:"vowel",glyph:"\u0909",matra:"\u0941"},U:{type:"vowel",glyph:"\u090A",matra:"\u0942"},\u016B:{type:"vowel",glyph:"\u090A",matra:"\u0942"},uu:{type:"vowel",glyph:"\u090A",matra:"\u0942"},v:{type:"consonant",glyph:"\u0935"},x:{type:"conjunct",glyph:"\u0915\u094D\u0937"},y:{type:"consonant",glyph:"\u092F"}};function N(){return{children:new Map,terminal:null}}function T(e){let n=N();for(let[o,t]of Object.entries(e)){if(o.length===0)continue;let r=n;for(let a of o){let i=r.children.get(a);i||(i=N(),r.children.set(a,i)),r=i}r.terminal={key:o,value:t}}return n}function f(e,n,o=0){let t=e,r=o,a=0,i="",s=null;for(;t&&r<n.length;){let l=n[r],c=t.children.get(l);if(!c)return{isPrefix:!1,matched:a>0,key:i,value:s,length:a};t=c,r+=1,t.terminal&&(a=r-o,i=t.terminal.key,s=t.terminal.value)}return{isPrefix:!!t&&r===n.length,matched:a>0,key:i,value:s,length:a}}function x(){let e=[];return{push(n){e.push(n)},pop(){return e.pop()},clear(){e.length=0},toString(){return e.join("")},size(){return e.length},isEmpty(){return e.length===0}}}function Z(e,n){return e==="\u0915"&&(n==="\u0937"||n==="\u0936")?"\u0915\u094D\u0937":e==="\u091C"&&n==="\u091E"?"\u091C\u094D\u091E":e==="\u0924"&&n==="\u092F"?"\u0924\u094D\u092F":e==="\u0917"&&n==="\u092F"?"\u091C\u094D\u091E":null}var M=(e,n)=>{let o=[];for(let t=0;t<e.length;t+=1){let r=e[t],a=e[t+1],i=e[t+2];if(r?.kind==="consonant"&&a?.kind==="halant"&&i?.kind==="consonant"){let s=Z(r.glyph,i.glyph);if(s){o.push({kind:"consonant",glyph:s}),t+=2;continue}}o.push(r)}return o};function V(e){return e.kind!=="raw"?!1:/[\s.,!?;:()[\]{}'"-]/u.test(e.text)}var ee=new Set(["\u0919","\u091E","\u0923","\u0928","\u092E"]),te=[{chars:new Set(["\u0915","\u0916","\u0917","\u0918"]),nasal:"\u0919"},{chars:new Set(["\u091A","\u091B","\u091C","\u091D"]),nasal:"\u091E"},{chars:new Set(["\u091F","\u0920","\u0921","\u0922"]),nasal:"\u0923"},{chars:new Set(["\u0924","\u0925","\u0926","\u0927"]),nasal:"\u0928"},{chars:new Set(["\u092A","\u092B","\u092C","\u092D"]),nasal:"\u092E"}];function ne(e){for(let n of te)if(n.chars.has(e))return n.nasal;return null}var O=(e,n)=>{let o=[];for(let t=0;t<e.length;t+=1){let r=e[t],a=e[t+1],i=e[t+2];if(!(r?.kind==="consonant"&&ee.has(r.glyph)&&a?.kind==="halant"&&i?.kind==="consonant")){o.push(r);continue}if(n.options.nasalizationMode==="anusvara"){o.push({kind:"mark",glyph:"\u0902"}),t+=1;continue}let l=ne(i.glyph);if(!l){o.push(r);continue}o.push({kind:"consonant",glyph:l})}return o};function b(e,n){return e?.kind==="raw"&&e.text===n}function D(e,n){return e?.kind==="consonant"&&e.glyph===n}function oe(e){return e?.kind==="vowelIndependent"&&e.glyph==="\u0905"}function v(e,n,o){return e.push({kind:"consonant",glyph:n}),oe(o)?(e.push({kind:"matra",glyph:"\u093E"}),!0):!1}var z=(e,n)=>{let o=[];for(let t=0;t<e.length;t+=1){let r=e[t],a=e[t+1];if(D(r,"\u0915")&&b(a,"*")){let i=e[t+2];if(v(o,"\u0958",i)){t+=2;continue}t+=1;continue}if(D(r,"\u0917")&&b(a,"*")){let i=e[t+2];if(v(o,"\u095A",i)){t+=2;continue}t+=1;continue}if(b(r,"q")){v(o,"\u0958",a)&&(t+=1);continue}if(b(r,"f")){v(o,"\u095E",a)&&(t+=1);continue}o.push(r)}return o};function y(e,n){return e?.kind==="consonant"&&e.glyph===n}function re(e,n){return e?.kind==="matra"&&e.glyph===n}function ae(e,n){return e?.kind==="mark"&&e.glyph===n}function d(e,n){return e?.kind===n}function k(e,n){let o=e[n+1];return!o||V(o)}var H=(e,n)=>{let o=e.map(t=>({...t}));for(let t=0;t<o.length;t+=1)ae(o[t],"\u0902")&&d(o[t+1],"consonant")&&d(o[t+2],"inherentA")&&k(o,t+2)&&(o[t+2]={kind:"matra",glyph:"\u093E"}),y(o[t],"\u0915")&&d(o[t+1],"inherentA")&&y(o[t+2],"\u092F")&&k(o,t+2)&&(o[t+1]={kind:"matra",glyph:"\u093E"}),y(o[t],"\u0958")&&d(o[t+1],"inherentA")&&k(o,t+1)&&(o[t+1]={kind:"matra",glyph:"\u093E"}),y(o[t],"\u0930")&&d(o[t+1],"halant")&&y(o[t+2],"\u0924")&&d(o[t+3],"inherentA")&&y(o[t+4],"\u092F")&&k(o,t+4)&&(o.splice(t+1,1),o[t+2]={kind:"matra",glyph:"\u093E"}),y(o[t],"\u0930")&&d(o[t+1],"halant")&&y(o[t+2],"\u0924")&&re(o[t+3],"\u094B")&&y(o[t+4],"\u0938")&&k(o,t+4)&&o.splice(t+1,1);return o};function F(e,n){let o=n.options.enableNukta?z(e,n):e,t=O(o,n),r=n.options.enableLigatureCollapse?M(t,n):t;return n.options.enableSchwaDeletion?H(r,n):r}var se={enableNukta:!0,nasalizationMode:"anusvara",enableLigatureCollapse:!0,enableSchwaDeletion:!0};function le(e){return/[\s.,!?;:()[\]{}"'-]/u.test(e)}function pe(e){return/\s/u.test(e)?"start":"other"}function B(e){return e.kind==="consonant"}function P(e,n){return e.type==="vowel"?n==="afterConsonant"?(e.matra??"")===""?{tokens:[{kind:"inherentA"}],context:"afterVowel"}:{tokens:[{kind:"matra",glyph:e.matra??""}],context:"afterVowel"}:{tokens:[{kind:"vowelIndependent",glyph:e.glyph}],context:"afterVowel"}:e.type==="consonant"||e.type==="conjunct"?{tokens:[{kind:"consonant",glyph:e.glyph}],context:"afterConsonant"}:e.type==="mark"?{tokens:[{kind:"mark",glyph:e.glyph}],context:n}:{tokens:[{kind:"raw",text:e.glyph}],context:n}}function ce(e){let n=[];for(let o=0;o<e.length;o+=1){let t=e[o],r=e[o+1];n.push(t),B(t)&&r&&B(r)&&n.push({kind:"halant",glyph:"\u094D"})}return n}function ue(e,n){let o=[],t=0,r="start";for(;t<e.length;){let a=f(n,e,t);if(a.matched&&a.value){if(a.key==="ng"&&t+a.length<e.length&&/[aAiIuUeEoOāīū]/u.test(e[t+a.length])){let c=f(n,"n");if(c.matched&&c.value){let h=P(c.value,r);o.push(...h.tokens),r=h.context,t+=1;continue}}let l=P(a.value,r);o.push(...l.tokens),r=l.context,t+=a.length;continue}let i=e[t];o.push({kind:"raw",text:i}),r=pe(i),t+=1}return ce(o)}function ye(e){let n="";for(let o of e)if(o.kind!=="inherentA"){if(o.kind==="raw"){n+=o.text;continue}n+=o.glyph}return n}function he(e,n,o){let t=ue(e,n),a=F(t,{options:o});return ye(a)}function j(e){let n=e.trie??T(e.expandedMap),o={...se,...e.rules??{}},t=x(),r="";function a(){let i=he(t.toString(),n,o),s={backspace:r.length,insert:i};return r=i,s}return{processChar(i){return le(i)?(t.clear(),r="",{backspace:0,insert:i}):(t.push(i),a())},backspace(){return t.isEmpty()?{backspace:0,insert:""}:(t.pop(),a())},commit(){return t.isEmpty()?{backspace:0,insert:""}:(t.clear(),r="",{backspace:0,insert:""})},reset(){t.clear(),r=""}}}function de(e){let n=e.value.length,o=e.selectionStart??n,t=e.selectionEnd??n;return{start:Math.max(0,Math.min(o,n)),end:Math.max(0,Math.min(t,n))}}function ge(e){try{let n=new InputEvent("input",{bubbles:!0,cancelable:!1,inputType:"insertText",data:null});e.dispatchEvent(n)}catch{let n=new Event("input",{bubbles:!0,cancelable:!1});e.dispatchEvent(n)}}function m(e,n,o){let{start:t,end:r}=de(e),a=Math.max(0,t-Math.max(0,n));if(typeof e.setRangeText=="function")e.setRangeText(o,a,r,"end");else{let s=`${e.value.slice(0,a)}${o}${e.value.slice(r)}`;e.value=s;let l=a+o.length;e.setSelectionRange(l,l)}ge(e);let i=a+o.length;return{start:i,end:i}}var E=class{element;constructor(n){this.element=n}deleteAndInsert(n,o,t){if(typeof n=="number"){if(!this.element||typeof o!="string")throw new Error("DOMIntegrator requires a bound element for deleteAndInsert(backspace, insert).");return m(this.element,n,o)}if(typeof o!="number"||typeof t!="string")throw new Error("deleteAndInsert(el, backspace, insert) requires all arguments.");return m(n,o,t)}};function me(e){if(e.childNodes.length===0){let t=e.ownerDocument.createTextNode("");return e.appendChild(t),t}if(e.childNodes.length===1&&e.firstChild?.nodeType===Node.TEXT_NODE)return e.firstChild;let n=e.textContent??"";e.textContent="";let o=e.ownerDocument.createTextNode(n);return e.appendChild(o),o}function w(e,n,o){let t=e.ownerDocument.getSelection();if(!t||t.rangeCount===0)return{collapsed:!1,applied:!1};let r=t.getRangeAt(0);if(!r.collapsed||!e.contains(r.startContainer))return{collapsed:!1,applied:!1};let a=me(e),i=a.data,s=i.length;r.startContainer===a&&(s=Math.max(0,Math.min(r.startOffset,i.length)));let l=Math.max(0,s-Math.max(0,n)),c=`${i.slice(0,l)}${o}${i.slice(s)}`;a.data=c;let h=l+o.length,g=e.ownerDocument.createRange();return g.setStart(a,h),g.collapse(!0),t.removeAllRanges(),t.addRange(g),{collapsed:!0,applied:!0}}function fe(e){return e instanceof HTMLTextAreaElement?!0:e instanceof HTMLInputElement?e.type==="text":!1}function ke(e){return e instanceof HTMLElement&&e.isContentEditable}function Te(e){return e.ctrlKey||e.altKey||e.metaKey}function xe(e){return e===" "||e==="Enter"||e==="Tab"}function K(e){let n=e.element,o=e.engine,t=e.onEditApplied,r=e.onBypass,a=e.enabled??!0,i=!1,s=!1,l=p=>{if(fe(n))return m(n,p.backspace,p.insert),t?.(p),!0;if(ke(n)){let u=w(n,p.backspace,p.insert);return u.collapsed?u.applied?(t?.(p),!0):!1:(r?.("selection"),!1)}return r?.("unsupported-target"),!1},c=()=>{s=!0},h=()=>{s=!1},g=p=>{if(!a){r?.("disabled");return}if(Te(p)){r?.("modifier");return}if(s){r?.("composition");return}if(xe(p.key)){o.commit();return}if(p.key!=="Backspace")return;let u=o.backspace();u.backspace===0&&u.insert===""||l(u)&&p.preventDefault()},S=p=>{if(!a){r?.("disabled");return}if(s){r?.("composition");return}if(p.inputType!=="insertText")return;let u=p.data;if(!u)return;let _=o.processChar(u);l(_)&&p.preventDefault()};return{attach(){i||(n.addEventListener("compositionstart",c),n.addEventListener("compositionend",h),n.addEventListener("keydown",g),n.addEventListener("beforeinput",S),i=!0)},detach(){i&&(n.removeEventListener("compositionstart",c),n.removeEventListener("compositionend",h),n.removeEventListener("keydown",g),n.removeEventListener("beforeinput",S),i=!1)},isAttached(){return i}}}var be={devanagari:{base:I},marathi:{phonetic:{base:A,expanded:C}}};0&&(module.exports={DOMIntegrator,buildTrie,createInputInterceptor,createInputStack,createTransliterationEngine,deleteAndInsert,deleteAndInsertContentEditable,devanagariBase,maps,marathiPhoneticBase,marathiPhoneticExpanded,walkLongest});
//# sourceMappingURL=index.cjs.map